<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 4: Troubleshooting</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 4: Troubleshooting"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2021-06-21 14:22:47"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 4: Troubleshooting &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Conclusion" href="../conclusion.html" />
    <link rel="prev" title="Lab 3: Reporting and Session Management" href="../module3/module3.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../class1/class1.html">100 Series: Access Foundational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class2/class2.html">200 Series: Assisted Deployment Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class3/class3.html">300 Series: Advanced Use Cases &amp; Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class4/class4.html">400 Series: Access Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class5/class5.html">500 Series: Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../archived.html">Archived Identity &amp; Access Management Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 4: Troubleshooting</a><ul>
<li><a class="reference internal" href="#task-1-logging-levels">Task 1: Logging Levels</a></li>
<li><a class="reference internal" href="#task-2-traffic-captures">Task 2: Traffic Captures</a></li>
<li><a class="reference internal" href="#information-logging-at-the-other-side">Information: Logging at the Other Side</a></li>
<li><a class="reference internal" href="#information-the-browser">Information: The Browser</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../../archived.html">Archived Identity &amp; Access Management Labs</a>
              &gt; <a href="../class2.html">Class 2: OAuth Federation with F5</a>

          <span class="right">
             <a href="../../../_sources/archived/class2/module4/module4.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-4-troubleshooting">
<h1>Lab 4: Troubleshooting<a class="headerlink" href="#lab-4-troubleshooting" title="Permalink to this headline">¶</a></h1>
<div class="section" id="task-1-logging-levels">
<h2>Task 1: Logging Levels<a class="headerlink" href="#task-1-logging-levels" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">You can turn up the logging levels specific to OAuth at
<strong>Access -&gt; Overview -&gt; Event Logs -&gt; Settings</strong>. Often times
<em>Informational</em> is enough to identify issues. It is recommended
to start there before going to debug. In particular pay attention
<em>session.oauth.client.last.errMsg</em> as it contains the errors the
other side reported back to you.</p>
<p><img alt="image228" src="../../../_images/image212.png" /></p>
<p><img alt="image229" src="../../../_images/image213.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-2-traffic-captures">
<h2>Task 2: Traffic Captures<a class="headerlink" href="#task-2-traffic-captures" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">You can actually examine what Big-IP has sent out when acting as a
client/resource server. First, capture the traffic on the
tmm channel:</p>
<p><code class="docutils literal notranslate"><span class="pre">tcpdump</span> <span class="pre">-i</span> <span class="pre">tmm:h</span> <span class="pre">-s0</span> <span class="pre">-w</span> <span class="pre">/tmp/oauth.dmp</span></code></p>
<p><img alt="image230" src="../../../_images/image214.png" /></p>
</li>
<li><p class="first">Then attempt your login using OAuth and ctrl-c the capture to end it. Now
you need to ssldump the output:</p>
<p><code class="docutils literal notranslate"><span class="pre">ssldump</span> <span class="pre">-dr</span> <span class="pre">/tmp/oauth.dmp</span> <span class="pre">|</span> <span class="pre">more</span></code></p>
<p><img alt="image231" src="../../../_images/image215.png" /></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Your SSL Ciphers must support ssldump utility. Refer to the
following link for further details <a class="reference external" href="https://support.f5.com/csp/article/K10209">https://support.f5.com/csp/article/K10209</a></p>
</div>
</li>
</ol>
</div>
<div class="section" id="information-logging-at-the-other-side">
<h2>Information: Logging at the Other Side<a class="headerlink" href="#information-logging-at-the-other-side" title="Permalink to this headline">¶</a></h2>
<p>Sometimes the issue is not at your end and some providers have their own
logging and reporting you can leverage. As an example, Google has a
dashboard that reports errors.</p>
</div>
<div class="section" id="information-the-browser">
<h2>Information: The Browser<a class="headerlink" href="#information-the-browser" title="Permalink to this headline">¶</a></h2>
<p>Although a lot of the critical stuff is passed back and forth directly
without your browser being involved, you can at least validate the
browser portions of the transaction are good (e.g. are you passing all
the values you should, example below for Google).</p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../module3/module3.html" title="Lab 3: Reporting and Session Management" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../conclusion.html" title="Conclusion" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/index.js"></script>
  <script src="../../../_static/js/jquery.appear.js"></script>
  <script src="../../../_static/js/printThis.js"></script>
  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  <script src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>