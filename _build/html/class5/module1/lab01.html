<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 1: The Message Box</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 1: The Message Box"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2021-06-21 13:45:41"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 1: The Message Box &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Archived Identity &amp; Access Management Labs" href="../../archived/archived.html" />
    <link rel="prev" title="Environment Overview" href="intro.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">100 Series: Access Foundational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">200 Series: Assisted Deployment Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">300 Series: Advanced Use Cases &amp; Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">400 Series: Access Automation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class5.html">500 Series: Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archived/archived.html">Archived Identity &amp; Access Management Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 1: The Message Box</a><ul>
<li><a class="reference internal" href="#task-1-setup-lab-environment">Task 1 - Setup Lab Environment</a></li>
<li><a class="reference internal" href="#task-2-create-a-failed-connection">Task 2 -  Create a failed connection</a></li>
<li><a class="reference internal" href="#task-3-create-the-test-branch">Task 3 - Create the Test Branch</a></li>
<li><a class="reference internal" href="#task-4-create-message-boxes">Task 4 - Create Message boxes</a></li>
<li><a class="reference internal" href="#task-5-add-the-test-condition">Task 5 - Add the Test condition</a></li>
<li><a class="reference internal" href="#task-6-test-failure">Task 6 - Test failure</a></li>
<li><a class="reference internal" href="#task-7-fix-the-policy">Task 7 - Fix the policy</a></li>
<li><a class="reference internal" href="#task-8-test-our-fix">Task 8 - Test Our Fix</a></li>
<li><a class="reference internal" href="#task-9-cleanup-the-test-branch">Task 9 - Cleanup the Test Branch</a></li>
<li><a class="reference internal" href="#task-10-validate-user1-is-working">Task 10 - Validate user1 is working</a></li>
<li><a class="reference internal" href="#task-11-lab-cleanup">Task 11 - Lab Cleanup</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../class5.html">500 Series: Troubleshooting</a>

          <span class="right">
             <a href="../../_sources/class5/module1/lab01.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-1-the-message-box">
<h1>Lab 1: The Message Box<a class="headerlink" href="#lab-1-the-message-box" title="Permalink to this headline">¶</a></h1>
<div class="section" id="task-1-setup-lab-environment">
<h2>Task 1 - Setup Lab Environment<a class="headerlink" href="#task-1-setup-lab-environment" title="Permalink to this headline">¶</a></h2>
<p>To access your dedicated student lab environment, you will need a web browser and Remote Desktop Protocol (RDP) client software. The web browser will be used to access the Unified Demo Framework (UDF) Training Portal. The RDP client will be used to connect to the jumphost, where you will be able to access the BIG-IP management interfaces (HTTPS, SSH).</p>
<ol class="arabic">
<li><p class="first">Click <strong>DEPLOYMENT</strong> located on the top left corner to display the environment</p>
</li>
<li><p class="first">Click <strong>ACCESS</strong> next to jumphost.f5lab.local</p>
<p><img alt="image001" src="../../_images/00121.png" /></p>
</li>
<li><p class="first">Select your RDP resolution.</p>
</li>
<li><p class="first">The RDP client on your local host establishes a RDP connection to the Jumphost.</p>
</li>
<li><p class="first">Login with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>User: <strong>f5lab\user1</strong></li>
<li>Password: <strong>user1</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">After successful logon the Chrome browser will auto launch opening the site <a class="reference external" href="https://portal.f5lab.local">https://portal.f5lab.local</a>.  This process usually takes 30 seconds after logon.</p>
</li>
<li><p class="first">Click the <strong>Classes</strong> tab at the top of the page.</p>
<blockquote>
<div><p><img alt="image002" src="../../_images/00222.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Scroll down the page until you see <strong>501 GUI Tools</strong> on the left</p>
<p><img alt="image003" src="../../_images/00321.png" /></p>
</li>
<li><p class="first">Hover over tile <strong>The Message Box</strong>. A start and stop icon should appear within the tile.  Click the <strong>Play</strong> Button to start the automation to build the environment</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="image056" src="../../_images/0565.png" /></td>
<td><img alt="image004" src="../../_images/00422.png" /></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">The screen should refresh displaying the progress of the automation within 30 seconds.  Scroll to the bottom of the automation workflow to ensure all requests succeeded.  If you you experience errors try running the automation a second time or open an issue on the <a class="reference external" href="https://github.com/f5devcentral/access-labs">Access Labs Repo</a>.</p>
<p><img alt="image005" src="../../_images/00522.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-2-create-a-failed-connection">
<h2>Task 2 -  Create a failed connection<a class="headerlink" href="#task-2-create-a-failed-connection" title="Permalink to this headline">¶</a></h2>
<p>The message box is a great tool for troubleshooting a policy that may have been reaching an ENDING DENY and closing the APM session too rapidly for proper inspection during the troubleshooting phase.</p>
<ol class="arabic">
<li><p class="first">From the jumphost open new browser tab. Then navigate to <a class="reference external" href="https://server1.acme.com">https://server1.acme.com</a>.</p>
</li>
<li><p class="first">You instantly receive an access denied message.  Let’s go look at a report to see why we failed the policy.</p>
<p><img alt="image006" src="../../_images/00621.png" /></p>
</li>
<li><p class="first">From the jumphost browser navigate to <a class="reference external" href="https://bigip1.f5lab.local">https://bigip1.f5lab.local</a></p>
</li>
<li><p class="first">Login with the following credentials:</p>
<ul class="simple">
<li>username <strong>admin</strong></li>
<li>password <strong>admin</strong></li>
</ul>
<p><img alt="image007" src="../../_images/00722.png" /></p>
</li>
<li><p class="first">Navigate to Access &gt;&gt; Overview &gt;&gt; Access Reports.</p>
<p><img alt="image008" src="../../_images/00821.png" /></p>
</li>
<li><p class="first">Click <strong>Run Report</strong></p>
<p><img alt="image009" src="../../_images/00921.png" /></p>
</li>
<li><p class="first">Click on the <strong>Session ID</strong> that matches your failed attempt.</p>
<p><img alt="image010" src="../../_images/01021.png" /></p>
</li>
<li><p class="first">You can see a client with the ip address <strong>10.1.10.10</strong> failed the firewall posture assessment. At this point the session variables have been deleted because all session variable are cleared after a session has been terminated.  So that leaves two choices.  Investigate further into the logs by turning on debug or find a way to keep the session alive long enough to look at the variables real-time.  For this lab we are going to pause the sessioon.</p>
<p><img alt="image011" src="../../_images/01122.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-3-create-the-test-branch">
<h2>Task 3 - Create the Test Branch<a class="headerlink" href="#task-3-create-the-test-branch" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Profiles/Policies &gt;&gt; Access Profiles (Per-Session Policies).</p>
<p><img alt="image012" src="../../_images/01222.png" /></p>
</li>
<li><p class="first">Click <strong>Edit</strong> to open Visual Policy Editor(VPE)</p>
<p><img alt="image013" src="../../_images/01323.png" /></p>
</li>
<li><p class="first">Exam the policy to understand where the failure is happening:</p>
<p><img alt="image014" src="../../_images/01421.png" /></p>
<ol class="upperalpha simple">
<li>Client enters <strong>IP Subnet Match</strong> action and proceeds to the <strong>fallback</strong> branch.</li>
<li>The client enters the <strong>Production Policy</strong> Macro</li>
<li>Inside the Macro the Client enters the <strong>Posture Assessment</strong> Macro</li>
<li>Inside the <strong>Posture Assessments</strong> Macro the client enters the <strong>Client OS</strong> action.</li>
<li>The client enters the <strong>Firewall</strong> Check action.</li>
<li>The client fails the check and proceeds to the <strong>failback</strong> branch</li>
<li>The client exits the <strong>Posture Assessments</strong> Macro to the <strong>fallback</strong> branch</li>
<li>The client exists the <strong>Production Policy</strong> Macro to the <strong>Deny</strong> Terminal</li>
</ol>
</li>
<li><p class="first">The first step in troubleshooting this user would be separating this user from all other production users on the system.  This can be done by entering the user’s IP address in the <strong>IP Subnet Match</strong> action.  Click the <strong>IP Subnet Match</strong> action</p>
<p><img alt="image015" src="../../_images/01522.png" /></p>
</li>
<li><p class="first">Click <strong>Branch Rules</strong></p>
</li>
<li><p class="first">Click <strong>Change</strong></p>
<p><img alt="image016" src="../../_images/01620.png" /></p>
</li>
<li><p class="first">Change the IP Subnet is value to the client address <strong>10.1.10.10/32</strong></p>
</li>
<li><p class="first">Click <strong>Finished</strong></p>
<p><img alt="image017" src="../../_images/01720.png" /></p>
</li>
<li><p class="first">Change the name to <strong>Test Branch 10.1.10.10</strong>.</p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image018" src="../../_images/01820.png" /></p>
</li>
<li><p class="first">Next time the client attempts to connect they will be sent down the test branch matching their IP address.  This can safely be done in production since the branch ends in a <strong>Deny</strong>.</p>
</li>
</ol>
<blockquote>
<div><img alt="image019" src="../../_images/01921.png" /></div></blockquote>
</div>
<div class="section" id="task-4-create-message-boxes">
<h2>Task 4 - Create Message boxes<a class="headerlink" href="#task-4-create-message-boxes" title="Permalink to this headline">¶</a></h2>
<p>In this task you will create two Message Box Macros.  One for the success branch and a second for a failure branch.  Having the Message Box in a Macro allows you to customize the messages but still use them in multiple locations.  Also when you are done using them you simply remove them from the flow of policy but they can still exist in the overall policy for the next time you need them.</p>
<ol class="arabic">
<li><p class="first">Click <strong>Add New Macro</strong></p>
<p><img alt="image020" src="../../_images/02020.png" /></p>
</li>
<li><p class="first">Enter the Name <strong>Success Box</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image021" src="../../_images/02119.png" /></p>
</li>
<li><p class="first">Expand the Macro</p>
</li>
<li><p class="first">Click the <strong>+ (Plus Symbol)</strong> on the fallback branch.</p>
<p><img alt="image022" src="../../_images/02219.png" /></p>
</li>
<li><p class="first">Click the <strong>General Purpose</strong> tab.</p>
</li>
<li><p class="first">Select <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image023" src="../../_images/02320.png" /></p>
</li>
<li><p class="first">Enter the Title <strong>Success</strong></p>
</li>
<li><p class="first">Enter the Description below</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;br&gt;Firewall Vendor: %<span class="o">{</span>session.check_software.last.fw.item_1.vendor_name<span class="o">}</span>
&lt;br&gt;Firewall Name: %<span class="o">{</span>session.check_software.last.fw.item_1.name<span class="o">}</span>
&lt;br&gt;Firewall Version: %<span class="o">{</span>session.check_software.last.fw.item_1.version<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image024" src="../../_images/02420.png" /></p>
</li>
<li><p class="first">Click <strong>Add New Macro</strong></p>
<p><img alt="image020" src="../../_images/02020.png" /></p>
</li>
<li><p class="first">Enter the Name <strong>Failure Box</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image025" src="../../_images/02520.png" /></p>
</li>
<li><p class="first">Expand the Macro</p>
</li>
<li><p class="first">Click the <strong>+</strong> (Plus Symbol) on the fallback branch.</p>
<p><img alt="image026" src="../../_images/02619.png" /></p>
</li>
<li><p class="first">Click the <strong>General Purpose</strong> tab.</p>
</li>
<li><p class="first">Select <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image023" src="../../_images/02320.png" /></p>
</li>
<li><p class="first">Enter the Title <strong>Failure</strong></p>
</li>
<li><p class="first">Enter the Description below</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;br&gt;Firewall Vendor: %<span class="o">{</span>session.check_software.last.fw.item_1.vendor_name<span class="o">}</span>
&lt;br&gt;Firewall Name: %<span class="o">{</span>session.check_software.last.fw.item_1.name<span class="o">}</span>
&lt;br&gt;Firewall Version: %<span class="o">{</span>session.check_software.last.fw.item_1.version<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image027" src="../../_images/02719.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-5-add-the-test-condition">
<h2>Task 5 - Add the Test condition<a class="headerlink" href="#task-5-add-the-test-condition" title="Permalink to this headline">¶</a></h2>
<p>In this section we will now add the condition we want to test against. Then use our message boxes to “pause” the session and provide us instant feedback.</p>
<ol class="arabic">
<li><p class="first">Click the <strong>+ (Plus Symbol)</strong> on the test branch</p>
<p><img alt="image028" src="../../_images/02819.png" /></p>
</li>
<li><p class="first">Click the <strong>Macros</strong> tab</p>
</li>
<li><p class="first">Select <strong>Posture Assessments</strong></p>
</li>
<li><p class="first">Select <strong>Add Item</strong></p>
<p><img alt="image029" src="../../_images/02919.png" /></p>
</li>
<li><p class="first">Click the <strong>+ (Plus Symbol)</strong> on the Pass branch</p>
<p><img alt="image030" src="../../_images/03017.png" /></p>
</li>
<li><p class="first">Click the <strong>Macros</strong> tab</p>
</li>
<li><p class="first">Select <strong>Success Box</strong></p>
</li>
<li><p class="first">Select <strong>Add Item</strong></p>
<p><img alt="image031" src="../../_images/03117.png" /></p>
</li>
<li><p class="first">Click the <strong>+ (Plus Symbol)</strong> on the Pass branch</p>
<p><img alt="image032" src="../../_images/03215.png" /></p>
</li>
<li><p class="first">Click the <strong>Macros</strong> tab</p>
</li>
<li><p class="first">Select <strong>Failure Box</strong></p>
</li>
<li><p class="first">Select <strong>Add Item</strong></p>
<p><img alt="image033" src="../../_images/03316.png" /></p>
</li>
<li><p class="first">Click <strong>Apply Access Policy</strong></p>
<p><img alt="image034" src="../../_images/03416.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-6-test-failure">
<h2>Task 6 - Test failure<a class="headerlink" href="#task-6-test-failure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From the jumphost open a new browser tab. Then navigate to <a class="reference external" href="https://server1.acme.com">https://server1.acme.com</a>.</p>
</li>
<li><p class="first">Rather than the instant deny, you are presented a message box with the below information.  This has now “paused” the session for you to look at the session variables.  Do <strong>NOT</strong> click Continue</p>
<p><img alt="image036" src="../../_images/03612.png" /></p>
</li>
<li><p class="first">Return the BIG-IP GUI and navigate to Access &gt;&gt; Overview &gt;&gt; Active session.</p>
<p><img alt="image037" src="../../_images/03712.png" /></p>
</li>
<li><p class="first">There is a current active session that has yet to be completed.  Click <strong>Variables</strong></p>
<p><img alt="image038" src="../../_images/03810.png" /></p>
</li>
<li><p class="first">Since the session has not yet been denied the BIG-IP and you have access to all the session variables.</p>
<p><img alt="image039" src="../../_images/03911.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-7-fix-the-policy">
<h2>Task 7 - Fix the policy<a class="headerlink" href="#task-7-fix-the-policy" title="Permalink to this headline">¶</a></h2>
<p>Now that we have the information about the clients Firewall settings we can return the policy to determine what is difference between the policy and what we are detecting on the client.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Profiles/Policies &gt;&gt; Access Profiles (Per-Session Policies).</p>
<p><img alt="image012" src="../../_images/01222.png" /></p>
</li>
<li><p class="first">Click <strong>Edit</strong> to open Visual Policy Editor(VPE)</p>
<p><img alt="image013" src="../../_images/01323.png" /></p>
</li>
<li><p class="first">Expand the <strong>Posture Assessments</strong> Macro</p>
</li>
<li><p class="first">Click <strong>Firewall</strong></p>
<p><img alt="image040" src="../../_images/04010.png" /></p>
</li>
<li><p class="first">The Platform, Vendor ID, Product ID all match what was stored in the session variables.  However, if you look closely at the Version number you notice a digit is missing.  The Firewall Action version is configured for 10.0.1433.0.  However, the message box contained the version 10.0.14393.0.  Let’s make a configuration change to our Firewall action and see if it fixes the problem.  Type the number <strong>10.0.14393.0</strong> into the version field</p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image041" src="../../_images/0419.png" /></p>
</li>
<li><p class="first">Click Apply Policy</p>
<p><img alt="image042" src="../../_images/0429.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-8-test-our-fix">
<h2>Task 8 - Test Our Fix<a class="headerlink" href="#task-8-test-our-fix" title="Permalink to this headline">¶</a></h2>
<p>When testing you should now receive the  Successful Message Box.</p>
<ol class="arabic">
<li><p class="first">From the jumphost open a new browser tab. Then navigate to <a class="reference external" href="https://server1.acme.com">https://server1.acme.com</a>.</p>
</li>
<li><p class="first">You have successfully diagnosed the problem.</p>
<p><img alt="image043" src="../../_images/0437.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-9-cleanup-the-test-branch">
<h2>Task 9 - Cleanup the Test Branch<a class="headerlink" href="#task-9-cleanup-the-test-branch" title="Permalink to this headline">¶</a></h2>
<p>While we have successfully diagnose the problem we haven’t actually fixed the problem for the user.  The client machine still goes down the test branch.  We must now revert our configuration in the test branch and allow the user to test again.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Profiles/Policies &gt;&gt; Access Profiles (Per-Session Policies).</p>
<p><img alt="image012" src="../../_images/01222.png" /></p>
</li>
<li><p class="first">Click <strong>Edit</strong> to open Visual Policy Editor(VPE)</p>
</li>
</ol>
<blockquote>
<div><img alt="image013" src="../../_images/01323.png" /></div></blockquote>
<ol class="arabic">
<li><p class="first">Click the <strong>X</strong> in the top right corner of the Posture Assessments Macro.</p>
<p><img alt="image044" src="../../_images/0449.png" /></p>
</li>
<li><p class="first">Verify the Connect Previous Node is set to <strong>Pass</strong></p>
</li>
<li><p class="first">Click <strong>Delete</strong></p>
<p><img alt="image045" src="../../_images/0458.png" /></p>
</li>
<li><p class="first">Click the <strong>X</strong> in the top right corner of the Success Box Macro.</p>
<p><img alt="image046" src="../../_images/0467.png" /></p>
</li>
<li><p class="first">Verify the Connect Previous Node is set to <strong>Out</strong></p>
</li>
<li><p class="first">Click <strong>Delete</strong></p>
<p><img alt="image047" src="../../_images/0476.png" /></p>
</li>
<li><p class="first">Click the <strong>IP Subnet match</strong> action.  <strong>NOT</strong> the X</p>
<p><img alt="image048" src="../../_images/0486.png" /></p>
</li>
<li><p class="first">Click <strong>Branch Rules</strong></p>
</li>
<li><p class="first">Click <strong>change</strong></p>
<p><img alt="image049" src="../../_images/0498.png" /></p>
</li>
<li><p class="first">Change the IP address back to the original value of <strong>127.0.0.1/32</strong></p>
</li>
<li><p class="first">Click <strong>Finished</strong></p>
<p><img alt="image050" src="../../_images/0507.png" /></p>
</li>
<li><p class="first">Change the Name back to the original value of <strong>Test Branch 127.0.0.1</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image051" src="../../_images/0515.png" /></p>
</li>
<li><p class="first">Click <strong>Apply Access Policy</strong></p>
<p><img alt="image052" src="../../_images/0525.png" /></p>
</li>
<li><p class="first">The configuration has now been reversed.  It’s important to note that while we deleted the Message Boxes from the current policy workflow the Macros are still there the next time we need them.</p>
</li>
</ol>
<blockquote>
<div><img alt="image053" src="../../_images/0535.png" /></div></blockquote>
</div>
<div class="section" id="task-10-validate-user1-is-working">
<h2>Task 10 - Validate user1 is working<a class="headerlink" href="#task-10-validate-user1-is-working" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From the jumphost open a new browser tab. Then navigate to <a class="reference external" href="https://server1.acme.com">https://server1.acme.com</a>.</p>
</li>
<li><p class="first">Rather than being denied you are presented a logon page.</p>
</li>
<li><p class="first">At the logon page enter the following credentials:</p>
<ul class="simple">
<li>Username:<strong>user1</strong></li>
<li>Password:<strong>user1</strong></li>
</ul>
</li>
<li><p class="first">Click <strong>Logon</strong></p>
<p><img alt="image054" src="../../_images/0545.png" /></p>
</li>
<li><p class="first">You are presented the webpage below.  Congratulations you have fixed the user’s problem and they are working again.</p>
<p><img alt="image055" src="../../_images/0555.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-11-lab-cleanup">
<h2>Task 11 - Lab Cleanup<a class="headerlink" href="#task-11-lab-cleanup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From a browser on the jumphost navigate to <a class="reference external" href="https://portal.f5lab.local">https://portal.f5lab.local</a></p>
</li>
<li><p class="first">Click the <strong>Classes</strong> tab at the top of the page.</p>
<blockquote>
<div><p><img alt="image002" src="../../_images/00222.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Scroll down the page until you see <strong>501 GUI Tools</strong> on the left</p>
<p><img alt="image003" src="../../_images/00321.png" /></p>
</li>
<li><p class="first">Hover over tile <strong>The Message Box</strong>. A start and stop icon should appear within the tile.  Click the <strong>Stop</strong> Button to trigger the automation to remove any prebuilt objects from the environment</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="image056" src="../../_images/0565.png" /></td>
<td><img alt="image998" src="../../_images/9988.png" /></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">The screen should refresh displaying the progress of the automation within 30 seconds.  Scroll to the bottom of the automation workflow to ensure all requests succeeded.  If you experience errors try running the automation a second time or open an issue on the <a class="reference external" href="https://github.com/f5devcentral/access-labs">Access Labs Repo</a>.</p>
<p><img alt="image999" src="../../_images/9998.png" /></p>
</li>
<li><p class="first">This concludes the lab.</p>
<p><img alt="image000" src="../../_images/00034.png" /></p>
</li>
</ol>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="intro.html" title="Environment Overview" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../../archived/archived.html" title="Archived Identity &amp; Access Management Labs" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>