<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 1: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using LDAP</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 1: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using LDAP"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2021-06-21 13:23:29"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 1: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using LDAP &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 2: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using Radius" href="lab02.html" />
    <link rel="prev" title="Environment Overview" href="intro.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">100 Series: Access Foundational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">200 Series: Assisted Deployment Use Cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class3.html">300 Series: Advanced Use Cases &amp; Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">400 Series: Access Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">500 Series: Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archived/archived.html">Archived Identity &amp; Access Management Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 1: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using LDAP</a><ul>
<li><a class="reference internal" href="#task-1-access-lab-environment">Task 1 - Access Lab Environment</a></li>
<li><a class="reference internal" href="#task-2-create-ephemeral-authentication-configuration">Task 2 - Create Ephemeral Authentication configuration</a></li>
<li><a class="reference internal" href="#task-3-create-an-ssh-security-configuration">Task 3 - Create an SSH Security Configuration</a></li>
<li><a class="reference internal" href="#task-4-create-an-access-configuration-for-ephemeral-authentication">Task 4 - Create an Access Configuration for Ephemeral Authentication</a></li>
<li><a class="reference internal" href="#task-5-create-webssh-resource">Task 5 - Create WebSSH Resource</a></li>
<li><a class="reference internal" href="#task-6-creating-an-ldap-authentication-configuration">Task 6 - Creating an LDAP Authentication configuration</a></li>
<li><a class="reference internal" href="#task-7-create-a-webtop">Task 7 - Create a Webtop</a></li>
<li><a class="reference internal" href="#task-8-create-an-access-profile">Task 8 - Create an Access Profile</a></li>
<li><a class="reference internal" href="#task-9-create-an-admin-access-macro">Task 9 - Create an Admin Access Macro</a></li>
<li><a class="reference internal" href="#task-10-create-an-get-upn-from-cac-macro">Task 10 - Create an GET UPN from CAC Macro</a></li>
<li><a class="reference internal" href="#task-11-create-the-ldap-macro">Task 11 - Create the LDAP Macro</a></li>
<li><a class="reference internal" href="#task-12-create-the-cac-auth-macro">Task 12 - Create the CAC AUTH Macro</a></li>
<li><a class="reference internal" href="#task-13-update-the-initial-access-policy">Task 13 - Update the Initial Access Policy</a></li>
<li><a class="reference internal" href="#task-14-create-an-ssl-profile">Task 14 - Create an SSL Profile</a></li>
<li><a class="reference internal" href="#task-16-add-the-pua-webtop-ssl-profile-to-pua-webtop-ssl-virtual-server">Task 16 - Add the <strong>pua.webtop.ssl</strong> profile to <strong>pua.webtop.ssl</strong> virtual Server</a></li>
<li><a class="reference internal" href="#task-17-pua-testing">Task 17 - PUA testing</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../class3.html">300 Series: Advanced Use Cases &amp; Solutions</a>

          <span class="right">
             <a href="../../_sources/class3/module6/lab01.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-1-deploy-priviledged-user-access-pua-or-ephemeral-authentication-using-ldap">
<h1>Lab 1: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using LDAP<a class="headerlink" href="#lab-1-deploy-priviledged-user-access-pua-or-ephemeral-authentication-using-ldap" title="Permalink to this headline">¶</a></h1>
<p>In this lab ephemeral authentication is configured on Access Policy Manager (APM) using LDAP authentication.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An External LDAP server is required for this scenario</p>
</div>
<div class="section" id="task-1-access-lab-environment">
<h2>Task 1 - Access Lab Environment<a class="headerlink" href="#task-1-access-lab-environment" title="Permalink to this headline">¶</a></h2>
<p>To access your dedicated student lab environment, you will need a web browser and Remote Desktop Protocol (RDP) client software. The web browser will be used to access the Unified Demo Framework (UDF) Training Portal. The RDP client will be used to connect to the jumphost, where you will be able to access the BIG-IP management interfaces (HTTPS, SSH).</p>
<ol class="arabic">
<li><p class="first">Click <strong>DEPLOYMENT</strong> located on the top left corner to display the environment</p>
</li>
<li><p class="first">Click <strong>ACCESS</strong> next to jumphost.f5lab.local</p>
<p><img alt="image200" src="../../_images/2002.png" /></p>
</li>
<li><p class="first">Select your RDP resolution.</p>
</li>
<li><p class="first">The RDP client on your local host establishes a RDP connection to the Jumphost.</p>
</li>
<li><p class="first">Login with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>User: <strong>f5labuser1</strong></li>
<li>Password: <strong>user1</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">After successful logon the Chrome browser will auto launch opening the site <a class="reference external" href="https://portal.f5lab.local">https://portal.f5lab.local</a>.  This process usually takes 30 seconds after logon.</p>
<blockquote>
<div><p><img alt="image201" src="../../_images/2012.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the <strong>Classes</strong> tab at the top of the page.</p>
</li>
<li><p class="first">Scroll down the page until you see <strong>302 Ephemeral Authentication-v16</strong> on the left</p>
<p><img alt="image202" src="../../_images/2021.png" /></p>
</li>
<li><p class="first">Hover over tile <strong>Implement Priviledged User Access Authentication</strong>. A start and stop icon should appear within the tile.  Click the <strong>Play</strong> Button to start the automation to build the environment</p>
<p><img alt="image203" src="../../_images/2031.png" /></p>
</li>
<li><p class="first">The screen should refresh displaying the progress of the automation within 30 seconds.  Scroll to the bottom of the automation workflow to ensure all requests succeeded.  If you you experience errors try running the automation a second time or open an issue on the <a class="reference external" href="https://github.com/f5devcentral/access-labs">Access Labs Repo</a>.</p>
<p><img alt="image204" src="../../_images/2041.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-2-create-ephemeral-authentication-configuration">
<h2>Task 2 - Create Ephemeral Authentication configuration<a class="headerlink" href="#task-2-create-ephemeral-authentication-configuration" title="Permalink to this headline">¶</a></h2>
<p>Ephemeral authentication Configuration defines the authentication method (LDAP or radius) and ephemeral password usage for privileged user access.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Ephemeral Authentication &gt;&gt; Authentication Configuration &gt;&gt; Click the <strong>+ (Plus Symbol)</strong></p>
<p><img alt="image1" src="../../_images/image00113.png" /></p>
</li>
<li><p class="first">Configure the General Properties:</p>
<ol class="arabic simple">
<li>Name: <strong>ldap.auth.conf</strong></li>
<li>Authentication Method: <strong>ldap</strong></li>
<li>Click <strong>Save</strong></li>
</ol>
<p><img alt="image2" src="../../_images/image00211.png" /></p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Password Expiration section defines the password usage and timer.</p>
</div>
</div>
<div class="section" id="task-3-create-an-ssh-security-configuration">
<h2>Task 3 - Create an SSH Security Configuration<a class="headerlink" href="#task-3-create-an-ssh-security-configuration" title="Permalink to this headline">¶</a></h2>
<p>The SSH Security Configuration defines the ciphers, exchange methods, HMACs, and compression algorithms required by the backend resource.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Ephemeral Authentication &gt;&gt; WebSSH Configuration &gt;&gt; SSH Security. Click the <strong>+ (Plus Symbol)</strong>.</p>
<p><img alt="image3" src="../../_images/image00312.png" /></p>
</li>
<li><p class="first">Configure the SSH Properties</p>
<ol class="arabic simple">
<li>Ciphers: <strong>aes256-ctr</strong>, <strong>aes192-ctr</strong></li>
<li>Key Exchange Methods: <strong>diffie-hellman-group1-sha14</strong>, <strong>diffie-hellman-group-exchange-sha1</strong></li>
<li>HMACs: <strong>hmac-sha1</strong></li>
<li>Compression Algorithms: <strong>none</strong></li>
<li>Click <strong>Save</strong></li>
</ol>
<p><img alt="image4" src="../../_images/image00410.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-4-create-an-access-configuration-for-ephemeral-authentication">
<h2>Task 4 - Create an Access Configuration for Ephemeral Authentication<a class="headerlink" href="#task-4-create-an-access-configuration-for-ephemeral-authentication" title="Permalink to this headline">¶</a></h2>
<p>Ephemeral Authentication Configuration specifies the password setting for privileged use access.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Ephemeral Authentication &gt;&gt; Access Configuration. Click the <strong>+ (plus symbol)</strong></p>
<p><img alt="image5" src="../../_images/image00510.png" /></p>
</li>
<li><p class="first">Configure the General Properties</p>
<ol class="arabic simple">
<li>Name: <strong>ldap.access.conf</strong></li>
<li>Authentication Configuration: <strong>ldap.auth.conf</strong></li>
<li>SSH Security Configuration: <strong>ldap.ssh.conf</strong></li>
<li>Click <strong>Save</strong></li>
</ol>
<p><a class="reference internal" href="../../_images/image00611.png"><img alt="image6" src="../../_images/image00611.png" style="width: 800px;" /></a></p>
</li>
</ol>
</div>
<div class="section" id="task-5-create-webssh-resource">
<h2>Task 5 - Create WebSSH Resource<a class="headerlink" href="#task-5-create-webssh-resource" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Ephemeral Authentication &gt;&gt; WebSSH Configuration &gt;&gt; Resource. Click the <strong>+ (plus symbol)</strong></p>
<p><img alt="image7" src="../../_images/image00711.png" /></p>
</li>
<li><p class="first">Configure the General Properties</p>
<ol class="arabic simple">
<li>Name: <strong>Client01</strong></li>
<li>Destination:
#. select: <strong>IP Address</strong> radio button
#. Enter IP: <strong>10.1.20.8</strong>
#. Port: <strong>2022</strong></li>
<li>Authentication configuration: <strong>ldap.auth.conf</strong></li>
</ol>
</li>
<li><p class="first">Configure the Customization Setting for English</p>
<ol class="arabic simple">
<li>Caption: <strong>Client01</strong></li>
<li>Click <strong>Save</strong></li>
</ol>
<p><img alt="image8" src="../../_images/image00811.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-6-creating-an-ldap-authentication-configuration">
<h2>Task 6 - Creating an LDAP Authentication configuration<a class="headerlink" href="#task-6-creating-an-ldap-authentication-configuration" title="Permalink to this headline">¶</a></h2>
<p>The LDAP Authentication configuration defines the external LDAP server used to identity users.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Ephemeral Authentication &gt;&gt; LDAP Authentication. Click the <strong>+ (plus symbol)</strong></p>
<p><img alt="image9" src="../../_images/image00911.png" /></p>
</li>
<li><p class="first">Configure General Properties</p>
<ol class="arabic simple">
<li>Name: <strong>ldap.conf</strong></li>
<li>Proxy User DN: <strong>cn=Admin,cn=Users,dc=f5lab,dc=local</strong></li>
<li>Proxy User Password: <strong>admin</strong></li>
</ol>
</li>
<li><p class="first">User settings</p>
<ol class="arabic simple">
<li>Bypass User List: <strong>cn=Admin,cn=Users,dc=f5lab,dc=local</strong>, and Click <strong>Add</strong></li>
<li>Click <strong>Finished</strong></li>
</ol>
<p><img alt="image10" src="../../_images/image01011.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-7-create-a-webtop">
<h2>Task 7 - Create a Webtop<a class="headerlink" href="#task-7-create-a-webtop" title="Permalink to this headline">¶</a></h2>
<p>The Webtop houses links to resources we would like to access.</p>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Webtops &gt;&gt; Webtop Lists. Click the <strong>+ (plus symbol)</strong></p>
<p><a class="reference internal" href="../../_images/image0139.png"><img alt="image13" src="../../_images/image0139.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">General Properties</p>
<ol class="arabic simple">
<li>Name: <strong>pua.webtop</strong></li>
<li>Type: <strong>Full</strong></li>
<li>Click <strong>Finish</strong></li>
</ol>
<p><a class="reference internal" href="../../_images/image0149.png"><img alt="image14" src="../../_images/image0149.png" style="width: 800px;" /></a></p>
</li>
</ol>
</div>
<div class="section" id="task-8-create-an-access-profile">
<h2>Task 8 - Create an Access Profile<a class="headerlink" href="#task-8-create-an-access-profile" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to Access &gt;&gt; Profiles / Policies &gt;&gt; Access Profiles (Per-Session Policies). Click the <strong>+ (plus symbol)</strong></p>
<p><a class="reference internal" href="../../_images/image0158.png"><img alt="image15" src="../../_images/image0158.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Configure General Properties</p>
<ol class="arabic simple">
<li>Name: <strong>pua.ldap.psp</strong></li>
<li>Profile Type: <strong>All</strong></li>
</ol>
<p><a class="reference internal" href="../../_images/image0169.png"><img alt="image16" src="../../_images/image0169.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Configure Language Setting</p>
<ol class="arabic simple">
<li>Click <strong>English</strong></li>
<li>CLick <strong>&lt;&lt;</strong></li>
<li>Click <strong>Finish</strong></li>
</ol>
<p><a class="reference internal" href="../../_images/image0179.png"><img alt="image17" src="../../_images/image0179.png" style="width: 800px;" /></a></p>
</li>
</ol>
</div>
<div class="section" id="task-9-create-an-admin-access-macro">
<h2>Task 9 - Create an Admin Access Macro<a class="headerlink" href="#task-9-create-an-admin-access-macro" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Click <strong>Edit</strong> to modify the access profile</p>
<p><img alt="image18" src="../../_images/image0189.png" /></p>
</li>
<li><p class="first">Click <strong>Add Macro</strong></p>
<p><img alt="image19" src="../../_images/image0199.png" /></p>
</li>
<li><p class="first">Enter <strong>Admin Access</strong> for the Name</p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image20" src="../../_images/image02010.png" /></p>
</li>
<li><p class="first">Expand the <strong>Admin Access</strong> Macro</p>
</li>
<li><p class="first">Click the <strong>+ (plus symbol)</strong> symbol between In and Out</p>
<p><a class="reference internal" href="../../_images/image02110.png"><img alt="image21" src="../../_images/image02110.png" style="width: 700px;" /></a></p>
</li>
<li><p class="first">Click <strong>Assignment</strong></p>
</li>
<li><p class="first">Click <strong>SSO credentials Mapping</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image22" src="../../_images/image02210.png" /></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image23" src="../../_images/image0239.png" /></p>
</li>
<li><p class="first">Click the <strong>+ (plus symbol)</strong> symbol to right of SSO Credential Mapping</p>
<p><img alt="image24" src="../../_images/image0248.png" /></p>
</li>
<li><p class="first">Click <strong>Assignment</strong></p>
</li>
<li><p class="first">Click <strong>Advance Rsource Assign</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image25" src="../../_images/image0258.png" /></p>
</li>
<li><p class="first">Click <strong>Add new entry</strong></p>
</li>
<li><p class="first">Click <strong>Add/Delete</strong></p>
<p><img alt="image26" src="../../_images/image0267.png" /></p>
</li>
<li><p class="first">Click <strong>WebSSH</strong></p>
</li>
<li><p class="first">Click <strong>/Common/Client01</strong></p>
<p><a class="reference internal" href="../../_images/image0277.png"><img alt="image27" src="../../_images/image0277.png" style="width: 600px;" /></a></p>
</li>
<li><p class="first">Click <strong>Webtop</strong></p>
</li>
<li><p class="first">Click <strong>/Common/pua.webtop</strong></p>
</li>
<li><p class="first">Click <strong>Update</strong></p>
<p><img alt="image28" src="../../_images/image0288.png" /></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image29" src="../../_images/image0298.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-10-create-an-get-upn-from-cac-macro">
<h2>Task 10 - Create an GET UPN from CAC Macro<a class="headerlink" href="#task-10-create-an-get-upn-from-cac-macro" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Click <strong>Add New Macro</strong></p>
<p><img alt="image30" src="../../_images/image0309.png" /></p>
</li>
<li><p class="first">Name: <strong>GET UPN from CAC</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image31" src="../../_images/image0318.png" /></p>
</li>
<li><p class="first">Expand <strong>GET UPN from CAC</strong></p>
</li>
<li><p class="first">Click <strong>+</strong> Symbol</p>
<p><img alt="image32" src="../../_images/image0329.png" /></p>
</li>
<li><p class="first">Click <strong>Assignment</strong></p>
</li>
<li><p class="first">Click <strong>Variable Assign</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><a class="reference internal" href="../../_images/image0338.png"><img alt="image33" src="../../_images/image0338.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Name: <strong>GET UPN</strong></p>
</li>
<li><p class="first">Click <strong>Add new entry</strong></p>
</li>
<li><p class="first">Click <strong>change</strong></p>
<p><img alt="image34" src="../../_images/image0347.png" /></p>
</li>
<li><p class="first">Define <strong>Custom Variable</strong> and <strong>Custom Expression</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Custom Variable = session.custom.ephemeral.upn</span>

<span class="go">Custom Expression =</span>
<span class="go">set x509e_fields [split [mcget {session.ssl.cert.x509extension}] &quot;\n&quot;];</span>
<span class="gp"># </span>For each element <span class="k">in</span> the list:
<span class="go">foreach field $x509e_fields {</span>
<span class="gp"># </span>If the element contains UPN:
<span class="go">if { $field contains &quot;othername:UPN&quot; } {</span>
<span class="gp">#</span><span class="c1"># set start of UPN variable - updated for new CACs</span>
<span class="go">set start [expr {[string first &quot;othername:UPN&lt;&quot; $field] +14}]</span>
<span class="gp"># </span>UPN format is &lt;user@domain&gt;
<span class="gp"># </span>Return the UPN, by finding the index of opening and closing brackets, <span class="k">then</span> use string range to get everything between.
<span class="go">return [string range $field $start [expr { [string first &quot;&gt;&quot; $field $start] - 1 } ] ];??} }</span>
<span class="gp"># </span>Otherwise <span class="k">return</span> UPN Not Found:
<span class="go">return &quot;UPN-NOT-FOUND&quot;;</span>
</pre></div>
</div>
</li>
<li><p class="first">Click <strong>Finished</strong></p>
<p><img alt="image35" src="../../_images/image0357.png" /></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image36" src="../../_images/image0369.png" /></p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong> beside GET UPN</p>
<p><img alt="image37" src="../../_images/image0378.png" /></p>
</li>
<li><p class="first">Click <strong>General Purpose</strong></p>
</li>
<li><p class="first">Click <strong>Empty</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image38" src="../../_images/image0388.png" /></p>
</li>
<li><p class="first">Name: <strong>Check UPN</strong></p>
</li>
<li><p class="first">Click <strong>Branch Rules</strong></p>
<p><img alt="image39" src="../../_images/image0395.png" /></p>
</li>
<li><p class="first">Click <strong>Add Branch Rule</strong></p>
</li>
<li><p class="first">Name: <strong>NO UPN</strong></p>
</li>
<li><p class="first">Click <strong>change</strong></p>
<p><img alt="image40" src="../../_images/image0405.png" /></p>
</li>
<li><p class="first">Click <strong>Advance</strong></p>
<p><img alt="image41" src="../../_images/image0416.png" /></p>
</li>
<li><p class="first">Enter: <strong>expr { [mcget {session.custom.ephemeral.upn}] == “UPN-NOT-FOUND” }</strong></p>
</li>
<li><p class="first">Click <strong>Finished</strong></p>
<p><img alt="image42" src="../../_images/image0426.png" /></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image43" src="../../_images/image0435.png" /></p>
</li>
</ol>
<p># Click <strong>+ (plus symbol)</strong> to the right of NO UPN</p>
<blockquote>
<div><img alt="image44" src="../../_images/image0444.png" /></div></blockquote>
<ol class="arabic">
<li><p class="first">Click <strong>General Purpose</strong></p>
</li>
<li><p class="first">Click <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image45" src="../../_images/image0455.png" /></p>
</li>
<li><p class="first">Name: <strong>NO UPN</strong></p>
</li>
<li><p class="first">Tile: <strong>NO UPN</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image46" src="../../_images/image0463.png" /></p>
</li>
<li><p class="first">Click <strong>Edit Terminals</strong></p>
<p><img alt="image47" src="../../_images/image0474.png" /></p>
</li>
<li><p class="first">Name: <strong>Found</strong></p>
</li>
<li><p class="first">Click <strong>Add Terminal</strong></p>
</li>
<li><p class="first">Name: <strong>Not Found</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image48" src="../../_images/image0486.png" /></p>
</li>
<li><p class="first">Click the <strong>Found</strong> Terminal beside NO UPN</p>
<p><a class="reference internal" href="../../_images/image0493.png"><img alt="image49" src="../../_images/image0493.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Not Found</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image50" src="../../_images/image0503.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-11-create-the-ldap-macro">
<h2>Task 11 - Create the LDAP Macro<a class="headerlink" href="#task-11-create-the-ldap-macro" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Click <strong>Add New Macro</strong></p>
<p><img alt="image51" src="../../_images/image0514.png" /></p>
</li>
<li><p class="first">Name: <strong>LDAP Query</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image52" src="../../_images/image0523.png" /></p>
</li>
<li><p class="first">Expand the LDAP Query Macro</p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong></p>
<p><img alt="image53" src="../../_images/image0533.png" /></p>
</li>
<li><p class="first">Click <strong>Authentication</strong></p>
</li>
<li><p class="first">Click <strong>LDAP Query</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image54" src="../../_images/image0544.png" /></p>
</li>
<li><p class="first">Update the Properties tab
<em>. Server = *</em>/Common/pua.ldap-servers**
<em>. SearchDN = **DC=f5lab*</em>, <strong>DC=local</strong>
<em>. SearchFilter = **UserPrincipalName=%{session.custom.ephemeral.upn}*</em>
<em>. Fetch groups to which the user or group belong = **Direct*</em>
<em>S. Click **Branch Rules*</em></p>
<p><img alt="image55" src="../../_images/image0554.png" /></p>
</li>
<li><p class="first">Click the <strong>X</strong> to remove the User Group Membership query</p>
<p><a class="reference internal" href="../../_images/image0564.png"><img alt="image56" src="../../_images/image0564.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Add Branch Rules</strong></p>
</li>
<li><p class="first">Name: <strong>LDAP Query</strong></p>
</li>
<li><p class="first">Click <strong>change</strong></p>
<p><img alt="image57" src="../../_images/image0573.png" /></p>
</li>
<li><p class="first">Click <strong>Add Expression</strong></p>
</li>
</ol>
<blockquote>
<div><img alt="image58" src="../../_images/image0584.png" /></div></blockquote>
<ol class="arabic">
<li><p class="first">Context: <strong>LDAP Query</strong></p>
</li>
<li><p class="first">Condition: <strong>LDAP Query Passed</strong></p>
</li>
<li><p class="first">LDAP Query has <strong>Passed</strong></p>
</li>
<li><p class="first">Click <strong>Add Expression</strong></p>
<p><img alt="image59" src="../../_images/image0594.png" /></p>
</li>
<li><p class="first">Click <strong>Finished</strong> and <strong>Save</strong></p>
<p><img alt="image60" src="../../_images/image0603.png" />
<a class="reference internal" href="../../_images/image0612.png"><img alt="image61" src="../../_images/image0612.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong> on the fallback branch</p>
<p><img alt="image62" src="../../_images/image0623.png" /></p>
</li>
<li><p class="first">Click <strong>General Purpose</strong></p>
</li>
<li><p class="first">Click <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image63" src="../../_images/image0633.png" /></p>
</li>
<li><p class="first">Name: <strong>LDAP Failure</strong></p>
</li>
<li><p class="first">Tile: <strong>LDAP Failure for user %{UserPrincipalName}</strong></p>
</li>
<li><p class="first">Click: <strong>Save</strong></p>
<p><img alt="image64" src="../../_images/image0643.png" /></p>
</li>
<li><p class="first">Click: <strong>Edit Terminals</strong></p>
<p><img alt="image65" src="../../_images/image0652.png" /></p>
</li>
<li><p class="first">Name: <strong>Success</strong></p>
</li>
<li><p class="first">Click <strong>Add Terminal</strong></p>
</li>
<li><p class="first">Name: <strong>Failure</strong></p>
<p><a class="reference internal" href="../../_images/image0662.png"><img alt="image66" src="../../_images/image0662.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click the <strong>Success</strong> Terminal beside LDAP Failure</p>
<p><img alt="image67" src="../../_images/image0671.png" /></p>
</li>
<li><p class="first">Click <strong>Failure</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image68" src="../../_images/image0681.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-12-create-the-cac-auth-macro">
<h2>Task 12 - Create the CAC AUTH Macro<a class="headerlink" href="#task-12-create-the-cac-auth-macro" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Click <strong>Add New Macro</strong></p>
<p><a class="reference internal" href="../../_images/image0692.png"><img alt="image69" src="../../_images/image0692.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Name: <strong>CAC AUTH</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><a class="reference internal" href="../../_images/image0703.png"><img alt="image70" src="../../_images/image0703.png" style="width: 1000px;" /></a></p>
</li>
<li><p class="first">Expand the <strong>CAC AUTH</strong> Macro</p>
</li>
<li><p class="first">CLick <strong>+ (plus symbol)</strong> between the IN and Out Terminal</p>
<p><img alt="image71" src="../../_images/image0713.png" /></p>
</li>
<li><p class="first">Click <strong>Authentication</strong></p>
</li>
<li><p class="first">Click <strong>On-Demand Cert-Auth</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image72" src="../../_images/image0722.png" /></p>
</li>
<li><p class="first">Ensure Auth Mode is set to <strong>Request</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image73" src="../../_images/image0733.png" /></p>
</li>
<li><p class="first">Click <strong>+</strong> between On-Demand Cert-Auth and Out on the successful branch</p>
<p><img alt="image74" src="../../_images/image0742.png" /></p>
</li>
<li><p class="first">Click <strong>Macro</strong></p>
</li>
<li><p class="first">Click <strong>GET UPN from CAC</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image75" src="../../_images/image0753.png" /></p>
</li>
<li><p class="first">Click <strong>+</strong> on the Not Found branch between GET UPN from CAC and Out</p>
<p><img alt="image76" src="../../_images/image0762.png" /></p>
</li>
<li><p class="first">Click <strong>General Purpose</strong></p>
</li>
<li><p class="first">Click <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image77" src="../../_images/image0773.png" /></p>
</li>
<li><p class="first">Name: <strong>CAC Failure</strong></p>
</li>
<li><p class="first">Title: <strong>CAC Failure</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image78" src="../../_images/image0782.png" /></p>
</li>
<li><p class="first">Click <strong>+* (plus symbol)</strong> on the Found Branch between GET UPN from CAC and Out</p>
<p><img alt="image79" src="../../_images/image0793.png" /></p>
</li>
<li><p class="first">Click <strong>Macro</strong></p>
</li>
<li><p class="first">Click <strong>LDAP_Query</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><a class="reference internal" href="../../_images/image0803.png"><img alt="image80" src="../../_images/image0803.png" style="width: 1200px;" /></a></p>
</li>
<li><p class="first">Click <strong>Edit Terminal</strong></p>
<p><a class="reference internal" href="../../_images/image0813.png"><img alt="image81" src="../../_images/image0813.png" style="width: 1000px;" /></a></p>
</li>
<li><p class="first">Name: <strong>Success</strong></p>
</li>
<li><p class="first">Click <strong>Add Terminal</strong></p>
<p><a class="reference internal" href="../../_images/image0823.png"><img alt="image82" src="../../_images/image0823.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Name: <strong>Failure</strong></p>
</li>
<li><p class="first">Click the down arrow beside the Failure box to change the order.</p>
<p><a class="reference internal" href="../../_images/image0833.png"><img alt="image83" src="../../_images/image0833.png" style="width: 1200px;" /></a></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><a class="reference internal" href="../../_images/image0843.png"><img alt="image84" src="../../_images/image0843.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Change the Success 1st, 2nd, and 4th terminal to <strong>Failure</strong>, and click <strong>Save</strong></p>
<p><a class="reference internal" href="../../_images/image0852.png"><img alt="image85" src="../../_images/image0852.png" style="width: 1200px;" /></a></p>
<p><a class="reference internal" href="../../_images/image0862.png"><img alt="image86" src="../../_images/image0862.png" style="width: 1200px;" /></a></p>
<p><a class="reference internal" href="../../_images/image0871.png"><img alt="image87" src="../../_images/image0871.png" style="width: 1200px;" /></a></p>
</li>
</ol>
</div>
<div class="section" id="task-13-update-the-initial-access-policy">
<h2>Task 13 - Update the Initial Access Policy<a class="headerlink" href="#task-13-update-the-initial-access-policy" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Click the <strong>+ (plus symbol)</strong> between the Start and Deny Terminals</p>
<p><a class="reference internal" href="../../_images/image088.png"><img alt="image88" src="../../_images/image088.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>General Purpose</strong></p>
</li>
<li><p class="first">Click <strong>Message Box</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image89" src="../../_images/image089.png" /></p>
</li>
<li><p class="first">Name: <strong>Warning Banner</strong></p>
</li>
<li><p class="first">Title: <strong>Official Lab Use Only!!</strong></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><a class="reference internal" href="../../_images/image0902.png"><img alt="image90" src="../../_images/image0902.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong> between the Warning Banner and Deny Terminals</p>
<p><a class="reference internal" href="../../_images/image0912.png"><img alt="image91" src="../../_images/image0912.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Macro</strong></p>
</li>
<li><p class="first">Click <strong>CAC Auth</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><img alt="image92" src="../../_images/image0921.png" /></p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong> between CAC Auth and Deny Terminals on the successful branch</p>
<p><a class="reference internal" href="../../_images/image0932.png"><img alt="image93" src="../../_images/image0932.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Assignment</strong></p>
</li>
<li><p class="first">Click <strong>Variable Assign</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><a class="reference internal" href="../../_images/image0942.png"><img alt="image94" src="../../_images/image0942.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Add new entry</strong></p>
</li>
<li><p class="first">Click <strong>Change</strong></p>
<p><a class="reference internal" href="../../_images/image0951.png"><img alt="image95" src="../../_images/image0951.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Set Custom Variable = <strong>session.custom.ephemeral.last.username</strong></p>
</li>
<li><p class="first">Set Custom Expression = <strong>session.logon.last.username</strong></p>
</li>
<li><p class="first">Click <strong>Finish</strong></p>
<p><a class="reference internal" href="../../_images/image0961.png"><img alt="image96" src="../../_images/image0961.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Add new entry</strong></p>
</li>
<li><p class="first">Click <strong>Change</strong></p>
<p><a class="reference internal" href="../../_images/image0971.png"><img alt="image97" src="../../_images/image0971.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Set Custom Variable = <strong>session.logon.last.username</strong></p>
</li>
<li><p class="first">Change Customer Expression to <strong>AAA Attribute</strong></p>
</li>
<li><p class="first">Change Agent Type: LDAP_Query to <strong>LDAP</strong></p>
</li>
<li><p class="first">Change LDAP attribute name to <strong>sAMAccountName</strong></p>
</li>
<li><p class="first">Click <strong>Finish</strong></p>
<p><a class="reference internal" href="../../_images/image098.png"><img alt="image98" src="../../_images/image098.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click <strong>Add new entry</strong></p>
</li>
<li><p class="first">Click <strong>Change</strong></p>
<p><a class="reference internal" href="../../_images/image099.png"><img alt="image99" src="../../_images/image099.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Set Custom Variable = <strong>session.custom.ephemeral.last.dn</strong></p>
</li>
<li><p class="first">Change Customer Expression to <strong>AAA Attribute</strong></p>
</li>
<li><p class="first">Change Agent Type: LDAP_Query to <strong>LDAP</strong></p>
</li>
<li><p class="first">Change LDAP attribute name to <strong>dn</strong></p>
</li>
<li><p class="first">Click <strong>Finish</strong></p>
<p><img alt="image100" src="../../_images/image1008.png" /></p>
</li>
<li><p class="first">Click <strong>Save</strong></p>
<p><img alt="image101" src="../../_images/image1015.png" /></p>
</li>
<li><p class="first">Click <strong>+ (plus symbol)</strong> between the Variable Assign and deny Terminals</p>
<p><img alt="image102" src="../../_images/image1024.png" /></p>
</li>
<li><p class="first">Click <strong>Macro</strong></p>
</li>
<li><p class="first">Click <strong>Admin Access</strong></p>
</li>
<li><p class="first">Click <strong>Add Item</strong></p>
<p><a class="reference internal" href="../../_images/image1035.png"><img alt="image103" src="../../_images/image1035.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Click the <strong>Deny</strong> terminal beside Admin Access</p>
<p><img alt="image104" src="../../_images/image1044.png" /></p>
</li>
<li><p class="first">Click <strong>Allow</strong></p>
</li>
<li><p class="first">Click <strong>SAVE</strong></p>
<p><img alt="image105" src="../../_images/image1054.png" /></p>
</li>
<li><p class="first">Click <strong>Apply Policy</strong></p>
<p><img alt="image106" src="../../_images/image1064.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-14-create-an-ssl-profile">
<h2>Task 14 - Create an SSL Profile<a class="headerlink" href="#task-14-create-an-ssl-profile" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to Local Traffic &gt;&gt; Profiles &gt;&gt; SSL &gt;&gt; Client &gt;&gt; <strong>+ (plus symbol)</strong></p>
<p><img alt="image107" src="../../_images/image1074.png" /></p>
</li>
<li><p class="first">Name: <strong>pua.webtop.ssl</strong></p>
</li>
<li><p class="first">Click <strong>Custom</strong> box beside Certificate Key Chain</p>
</li>
<li><p class="first">Click <strong>Add</strong></p>
<p><img alt="image108" src="../../_images/image1084.png" /></p>
</li>
<li><p class="first">Verify Certificate is set to <strong>acme.com-wildcard</strong></p>
</li>
<li><p class="first">Verify Key is set to <strong>acme.com-wildcard</strong></p>
<p><a class="reference internal" href="../../_images/image1094.png"><img alt="image109" src="../../_images/image1094.png" style="width: 800px;" /></a></p>
</li>
<li><p class="first">Verify Trusted Certficate Authorities is set to <strong>ca.f5lab.local</strong></p>
</li>
<li><p class="first">Verify Advertised Certificate Authorities is set to <strong>ca.f5lab.local</strong></p>
</li>
<li><p class="first">Click <strong>update</strong></p>
<p><img alt="image110" src="../../_images/image1103.png" /></p>
</li>
</ol>
<p>Task 15 - Create a Connectivity Profile</p>
<p>Navigate to Access &gt;&gt; Profiles / Policies &gt;&gt; Connectivity / VPN &gt;&gt; Connectivity &gt;&gt; Profile <strong>+ (plus symbol)</strong></p>
<blockquote>
<div><img alt="image111" src="../../_images/image1115.png" /></div></blockquote>
<ol class="arabic">
<li><p class="first">Profile Name: <strong>pua.cp</strong></p>
</li>
<li><p class="first">Parent Profle: <strong>/Common/Connectivity</strong></p>
</li>
<li><p class="first">Click <strong>OK</strong></p>
<p><img alt="image112" src="../../_images/image1124.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-16-add-the-pua-webtop-ssl-profile-to-pua-webtop-ssl-virtual-server">
<h2>Task 16 - Add the <strong>pua.webtop.ssl</strong> profile to <strong>pua.webtop.ssl</strong> virtual Server<a class="headerlink" href="#task-16-add-the-pua-webtop-ssl-profile-to-pua-webtop-ssl-virtual-server" title="Permalink to this headline">¶</a></h2>
<p>Navigate to Local Traffic &gt;&gt; Virtual Servers
#. Select the <strong>PUA</strong> partitiion
#. Click <strong>Virtual Servers</strong></p>
<blockquote>
<div><img alt="image113" src="../../_images/image1133.png" /></div></blockquote>
<ol class="arabic">
<li><p class="first">Click the <strong>pua.acme.com</strong> link</p>
<p><img alt="image114" src="../../_images/image1144.png" /></p>
</li>
<li><p class="first">Under Configuration, move <strong>pua.webtop.ssl</strong> SSL Profile to Selected</p>
<p><img alt="image115" src="../../_images/image1153.png" /></p>
</li>
<li><p class="first">Access Policy
<em>. Set Access Profile to **pua.ldap.psp*</em>
<em>. Set Connectivity Profile to **pua.cp*</em></p>
</li>
<li><p class="first">Ephemeral Authentication
* Set Access Configuration to <strong>pua.access.conf</strong>
* Set LDAP Authentication Configuration to <strong>pua.ldap.conf</strong>
* Click <strong>Update</strong></p>
<p><img alt="image116" src="../../_images/image1164.png" /></p>
</li>
<li><p class="first">Navigate to Local Traffic &gt;&gt; Virtual Servers</p>
</li>
<li><p class="first">Select the <strong>LDAP</strong> partitiion</p>
</li>
<li><p class="first">Click <strong>pua-LDAP</strong></p>
<p><img alt="image117" src="../../_images/image1174.png" /></p>
</li>
<li><p class="first">Ephemeral Authentication
* Set Access Configuration to <strong>pua.access.conf</strong>
* Set LDAP Authentication Configuration to <strong>pua.ldap.conf</strong>
* Click <strong>Update</strong></p>
</li>
</ol>
</div>
<div class="section" id="task-17-pua-testing">
<h2>Task 17 - PUA testing<a class="headerlink" href="#task-17-pua-testing" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Open a browser to <strong>https://pua.acme.com</strong></p>
</li>
<li><p class="first">Click <strong>Continue</strong></p>
<p><img alt="image118" src="../../_images/image1183.png" /></p>
</li>
<li><p class="first">Uncheck Remember this decision</p>
</li>
<li><p class="first">Choose <strong>user1</strong> Certificate</p>
</li>
<li><p class="first">Click <strong>OK</strong></p>
<p><img alt="image119" src="../../_images/image1193.png" /></p>
</li>
<li><p class="first">Click <strong>Client01</strong> tab</p>
<p><img alt="image120" src="../../_images/image1204.png" /></p>
</li>
<li><p class="first">Observer the user logged into the server and connectivity status</p>
<p><img alt="image121" src="../../_images/image1215.png" /></p>
</li>
</ol>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="intro.html" title="Environment Overview" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab02.html" title="Lab 2: Deploy Priviledged User Access (PUA) or Ephemeral Authentication using Radius" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>