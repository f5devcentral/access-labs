<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 1: Create a baseline Per-Session Policy</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 1: Create a baseline Per-Session Policy"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2021-06-21 13:45:41"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 1: Create a baseline Per-Session Policy &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 2: Create a SAML SP Per-Session Policy" href="lab02.html" />
    <link rel="prev" title="Environment Overview" href="intro.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">100 Series: Access Foundational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">200 Series: Assisted Deployment Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">300 Series: Advanced Use Cases &amp; Solutions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class4.html">400 Series: Access Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">500 Series: Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archived/archived.html">Archived Identity &amp; Access Management Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 1: Create a baseline Per-Session Policy</a><ul>
<li><a class="reference internal" href="#task-1-access-lab-environment">Task 1 - Access Lab Environment</a></li>
<li><a class="reference internal" href="#task-2-import-postman-collections">Task 2 - Import Postman Collections</a></li>
<li><a class="reference internal" href="#task-3-explore-the-icontrolrest-endpoints">Task 3 - Explore the icontrolRest Endpoints</a></li>
<li><a class="reference internal" href="#task-4-create-your-first-policy-using-automation">Task 4 - Create your first policy using automation</a></li>
<li><a class="reference internal" href="#task-5-deleting-an-access-profile">Task 5 - Deleting an Access Profile</a></li>
<li><a class="reference internal" href="#task-6-lab-cleanup">Task 6 - Lab Cleanup</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../class4.html">400 Series: Access Automation</a>

          <span class="right">
             <a href="../../_sources/class4/module2/lab01.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-1-create-a-baseline-per-session-policy">
<h1>Lab 1: Create a baseline Per-Session Policy<a class="headerlink" href="#lab-1-create-a-baseline-per-session-policy" title="Permalink to this headline">¶</a></h1>
<p id="class4-module2-lab1">In this lab you will learn about the API calls necessary to build the basline Access Policy as if you had clicked <strong>create</strong> from GUI.  The graphic below depicts the basic flow required for creating a policy via API.</p>
<blockquote>
<div><img alt="image100" src="../../_images/1001.png" /></div></blockquote>
<div class="section" id="task-1-access-lab-environment">
<h2>Task 1 - Access Lab Environment<a class="headerlink" href="#task-1-access-lab-environment" title="Permalink to this headline">¶</a></h2>
<p>To access your dedicated student lab environment, you will need a web browser and Remote Desktop Protocol (RDP) client software. The web browser will be used to access the Unified Demo Framework (UDF) Training Portal. The RDP client will be used to connect to the jumphost, where you will be able to access the BIG-IP management interfaces (HTTPS, SSH).</p>
<ol class="arabic">
<li><p class="first">Click <strong>DEPLOYMENT</strong> located on the top left corner to display the environment</p>
</li>
<li><p class="first">Click <strong>ACCESS</strong> next to jumphost.f5lab.local</p>
<blockquote>
<div><p><img alt="image101" src="../../_images/1013.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Select your RDP resolution.</p>
</li>
<li><p class="first">The RDP client on your local host establishes a RDP connection to the Jump Host.</p>
</li>
<li><p class="first">Login with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>User: <strong>f5lab\user1</strong></li>
<li>Password: <strong>user1</strong></li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-2-import-postman-collections">
<h2>Task 2 - Import Postman Collections<a class="headerlink" href="#task-2-import-postman-collections" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From the Jumphost, open <strong>Postman</strong> via the desktop shortcut or toolbar at the bottom</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dismiss any prompts to update Postman.</p>
</div>
<p><img alt="image001" src="../../_images/00118.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Yes</strong> if prompted for “Do you want to allow this app to make changes to your device?”</p>
<blockquote>
<div><p><img alt="image002" src="../../_images/00219.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Import</strong> located on the top left of the Postman application</p>
<blockquote>
<div><p><img alt="image003" src="../../_images/00318.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Upload Files</strong></p>
<p><img alt="image004" src="../../_images/00419.png" /></p>
</li>
<li><p class="first">Navigate to C:\access-labs\class4\module2\student_files, select <strong>student-class4-module2-lab1.postman_collection.json</strong>, and click <strong>Open</strong></p>
<blockquote>
<div><p><img alt="image005" src="../../_images/00519.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Import</strong></p>
<p><img alt="image006" src="../../_images/00618.png" /></p>
</li>
<li><p class="first">A collection called <strong>student-class4-module2-lab1</strong> will appear on the left side in Postman</p>
</li>
</ol>
</div>
<div class="section" id="task-3-explore-the-icontrolrest-endpoints">
<h2>Task 3 - Explore the icontrolRest Endpoints<a class="headerlink" href="#task-3-explore-the-icontrolrest-endpoints" title="Permalink to this headline">¶</a></h2>
<ol class="arabic" id="class4-module2-lab1-endpoints">
<li><p class="first">Expand the <strong>student-class4-module2-lab1</strong> collection and the <strong>Create Policy</strong> folder to see its subfolders.</p>
<blockquote>
<div><p><img alt="image007" src="../../_images/00719.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Create Transaction</strong> subfolder and click on the request <strong>bigip-create-transaction</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating or modifying a policy it must be performed within a transaction.  A transaction occurs in multiple steps.  First, you create the transaction by receiving a transaction ID from the BIG-IP.  Next, you pass subsequent configuration requests that contain the transaction ID header to the BIG-IP.  The BIG-IP does not process these requests.  Instead it holds those requests until the transaction is commited in the final step.  It’s important to understand that transactions have an all or nothing approach.  Either every request in the transaction is processed sucessfully or none of the configuration changes are made.  This is extremely important to ensure all the required information is correct for building a working policy.</p>
</div>
</li>
<li><p class="first">Click on Body. The only thing in the Body are open and close curly braces.</p>
<blockquote>
<div><p><img alt="image008" src="../../_images/00818.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click on <strong>Tests</strong> in Postman, Tests are performed after the response from the endpoint is retreived.  This javascript parses the response body for the transId and saves it as a variable for use in subsequent requests.</p>
<blockquote>
<div><p><img alt="image009" src="../../_images/00918.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>Send</strong> button in the upper right corner.</p>
</li>
<li><p class="first">You will receive a 200 OK.  The response body contains the transaction ID. Also, notice that there is a default timeout value of 300 seconds for the transaction to complete.</p>
<blockquote>
<div><p><img alt="image010" src="../../_images/01018.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Baseline Customization Groups</strong> subfolder.  There are five mandatory customization groups created anytime an APM Per-Session Policy is created. A Customization Group defines the look of a particualar object such as the difference between the logout page on 13.1 and 15.1. Not all policy-items have a customization group.  Any Agent that is enduser facing will have a customization group associated with it. That includes items such as logon pages, webtops, logout pages.  Whereas something such as an Active Directory Authentication will not have a customization group.</p>
</li>
<li><p class="first">Click <strong>bigip-create-customization group-logout</strong></p>
</li>
<li><p class="first">Click on <strong>Headers</strong>.  A header is inserted into each request called <strong>X-F5-REST-Coordination-Id</strong> that references a Postman variable.  That variable contains the transId stored from the previous <strong>bigip-create-transaction</strong> request.  All Requests inside the transaction MUST have that header.</p>
<blockquote>
<div><p><img alt="image011" src="../../_images/01119.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Cick on <strong>Body</strong>.  Customization is done by setting the <strong>source</strong> JSON key to either <strong>/Common/modern</strong> or <strong>/Common/standard</strong>. This lab uses a Postman variable that references <strong>/Common/modern</strong>.</p>
<blockquote>
<div><p><img alt="image012" src="../../_images/01219.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The four remaining requests in the <strong>Baseline customization Group</strong> subfolder all look the same except the value of the <strong>type</strong> JSON Key is different.  If click through you will notice they all hit the same endpoint of <strong>/mgmt/tm/apm/policy/customization-group</strong></p>
</li>
<li><p class="first">Expand the <strong>Deny Ending</strong> subfolder</p>
<blockquote>
<div><p><img alt="image013" src="../../_images/01320.png" /></p>
</div></blockquote>
</li>
<li><p class="first">To create a Deny Terminal in a policy it takes three requests. A good rule of thumb is every object you manually build in Visual Policy Editor will take three Requests  The first defines a <strong>customization group</strong>, the second defines an <strong>agent</strong>, and the third defines a <strong>policy-item</strong>.</p>
</li>
<li><p class="first">Click <strong>bigip-create-customization group-deny emding</strong>.  This customization group request is same as all previous customization group requests except for the name and the value of the <strong>type</strong> JSON key is <strong>logout</strong></p>
</li>
<li><p class="first">Click <strong>bigip-create-agent-deny ending</strong>.  An agent contains the operational settings for that object. For example, an AD authentication agent would contain the list of AD servers to be used or a SAMl Agent would contain the SAML Service Provider to be used.  In the case of an ending it will only contain the previously defined customization group.</p>
</li>
<li><p class="first">The endpoint is <strong>/mgmt/tm/apm/policy/agent/ending-deny</strong>. Each agent type has its own endpoint unlike customization groups.</p>
<blockquote>
<div><p><img alt="image014" src="../../_images/01418.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-policy item-deny ending</strong>.  A Policy-Item contains all the settings related to its placement in the flow such as branch rules. Since this is an ending we will not see any branch rules but will see references to this policy-item after a few more steps. Additional settings of how the ending is displayed in Visual Policy Editor are also specified here such as caption and color. Lastly there will always be a reference to an Agent via its name.  The agent specified is the agent in the previous request.</p>
<blockquote>
<div><p><img alt="image015" src="../../_images/01519.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Allow Ending</strong> subfolder</p>
<blockquote>
<div><p><img alt="image016" src="../../_images/01617.png" /></p>
</div></blockquote>
</li>
<li><p class="first">There is only an agent and policy-item.  If the connection is allowed the user will not be see anything displayed from APM so no need for a customization group.  This is an example of a policy-item that is not enduser facing.</p>
</li>
<li><p class="first">Click <strong>Body</strong>.  The allow agent only contains a name and partition.</p>
<blockquote>
<div><p><img alt="image017" src="../../_images/01717.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-policy item-allow ending</strong>.  Then, click <strong>Body</strong>.</p>
</li>
<li><p class="first">The structure of an allow ending is similiar to the previous deny ending.  Since this is an ending it doesn’t contain any branch rules.</p>
<blockquote>
<div><p><img alt="image018" src="../../_images/01817.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Start Item</strong> subfolder and notice there is only a single request.  There is not an agent or customization group required for the start-item.</p>
<blockquote>
<div><p><img alt="image019" src="../../_images/01918.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-policy item-start</strong> and then <strong>Body</strong></p>
</li>
<li><p class="first">The <strong>Rules</strong> JSON key defines the branch rules for a policy-item.  All Policy-items except for terminal endpoints contain a <strong>rules</strong> condition.  In this case, the Start policy-item connects to the Deny Terminal.    Secondly, the <strong>Rules</strong> JSON key is defined as an array because of the brackets.  This will allow the definition of multiple branch rules using expressions. An example of this is an authentication Policy-item having a success and failure branch.  This will be covered in future labs.</p>
<blockquote>
<div><p><img alt="image020" src="../../_images/02017.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Create Policy</strong> subfolder</p>
<blockquote>
<div><p><img alt="image021" src="../../_images/02116.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-policy</strong> and then <strong>Body</strong></p>
</li>
<li><p class="first">In order to create a policy all of the policy-items  MUST be defined inside the <strong>items</strong> JSON key array.  In this case we are only building a empty policy so only three items Start Item, Deny Terminal, and Allow Terminal are defined.</p>
<blockquote>
<div><p><img alt="image022" src="../../_images/02216.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Create Profile</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image023" src="../../_images/02317.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-profile</strong> and then <strong>Body</strong>.   It contains the various setting related to timers, sessions, and logging.  The body also contains the five baseline customization groups defined at the beginning of the collection.</p>
<blockquote>
<div><p><img alt="image024" src="../../_images/02417.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Commit Transaction</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image025" src="../../_images/02517.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-commit-transaction</strong> and then <strong>Body</strong>.</p>
</li>
<li><p class="first">Notice the request is sent to the endpoint <strong>/mgmt/tm/transaction/</strong> along with the transactionID using the PUT Method.  The body contains the <strong>state</strong> JSON Key with the value <strong>VALIDATING</strong>.  This request triggers the BIG-IP to process all the requests that contain the transactionID header.  After the transaction is completed you will recieve a 200 OK.  If you receive any status code but 200 OK, one or more of the requests in the transaction could not be completed.</p>
<blockquote>
<div><p><img alt="image026" src="../../_images/02616.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Expand the <strong>Apply Policy</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image027" src="../../_images/02716.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-apply Policy</strong> and then <strong>Body</strong></p>
</li>
<li><p class="first">The Request is sent to the endpoint <strong>/mgmt/tm/apm/profile/access/</strong> using the PATCH Method.  When a patch is sent to the endpoint of a profile with the JSON body <strong>“generationAction”: “increment”</strong> it instructs the BIG-IP that you want to Apply Policy.  Think commit changes.</p>
<blockquote>
<div><p><img alt="image028" src="../../_images/02816.png" /></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-4-create-your-first-policy-using-automation">
<h2>Task 4 - Create your first policy using automation<a class="headerlink" href="#task-4-create-your-first-policy-using-automation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Now that we have walked through all the API calls required to create a policy through automation, we will use Postman Runner to create it.</p>
</li>
<li><p class="first">Hover over the Collection name <strong>student-class4-module2-lab1</strong> with your mouse and click the <strong>Arrow</strong> icon.</p>
<p><img alt="image029" src="../../_images/02916.png" /></p>
</li>
<li><p class="first">Click the <strong>Create Policy</strong> folder</p>
<blockquote>
<div><p><img alt="image030" src="../../_images/03014.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Run</strong> and Postman Runner will open.</p>
<blockquote>
<div><p><img alt="image031" src="../../_images/03114.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue button <strong>Run student-class…</strong> and the API requests will start being sent to the BIG-IP.</p>
<blockquote>
<div><p><img alt="image032" src="../../_images/03212.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The <strong>Pass</strong> circle will display a value of two even through there were more requests than two.   Postman will display either passed or failed for only the requests that contain <strong>Test</strong> conditions.   In this example, only the Commit Transaction request and the Apply Policy request contain <strong>Tests</strong>.  Another thing to note,  The requests that contained the transaction ID will always receive a 200 OK unless sent to an invalid endpoint or the JSON is improperly formatted.  Remember with a transaction, a request is not actually processed until the transaction is commited.</p>
</li>
<li><p class="first">Close Runner by clicking the <strong>X</strong> in the top right corner.</p>
<blockquote>
<div><p><img alt="image033" src="../../_images/03313.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Collapse the main <strong>Create Policy</strong> folder so only two folders are displayed in the collection</p>
<blockquote>
<div><p><img alt="image041" src="../../_images/0418.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Open a browser and navigate to <a class="reference external" href="https://bigip1.f5lab.local">https://bigip1.f5lab.local</a></p>
</li>
<li><p class="first">Login to the BIG-IP GUI with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Navigate to Access&gt;&gt;Profiles/Policies&gt;&gt;Access Profiles (Per-Session Policies).  Do not click the plus symbol.</p>
<blockquote>
<div><p><img alt="image034" src="../../_images/03413.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The policy you created via automation is displayed.  Click <strong>Edit</strong>.</p>
<blockquote>
<div><p><img alt="image035" src="../../_images/03511.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The policy is empty as planned.  This collection of requests is a baseline for creating anything in APM regarfless of how basic or complex the Access Policy.</p>
<p><img alt="image036" src="../../_images/03610.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-5-deleting-an-access-profile">
<h2>Task 5 - Deleting an Access Profile<a class="headerlink" href="#task-5-deleting-an-access-profile" title="Permalink to this headline">¶</a></h2>
<ol class="arabic" id="class4-module2-lab1-delete">
<li><p class="first">From Postman, Expand the <strong>Delete Policy</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image037" src="../../_images/03710.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The first thing you will notice is it takes fewer requests to delete a policy than it does to create it.    In order to delete a policy you need to first delete the profile and then the policy.</p>
</li>
<li><p class="first">Click <strong>bigip-delete-profile-psp</strong>.  To delete a profile you send a DELETE request to the /mgmt/tm/apm/profile/access endpoint along with the Partition and profile name.</p>
<blockquote>
<div><p><img alt="image038" src="../../_images/0389.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>send</strong> button in the upper right corner.  You will receive a 200 OK response.  This is an indication that the profile was found and deleted.</p>
</li>
<li><p class="first">Click <strong>bigip-delete-policy-psp</strong>.  To delete a policy you send a DELETE request to the /mgmt/tm/apm/policy/access-policy endpoint along with the partition and policy name.</p>
</li>
<li><p class="first">Click the blue <strong>send</strong> button in the upper right corner.  You will receive a 200 OK response.  This is an indication that policy was found and deleted.</p>
</li>
<li><p class="first">Open a browser and navigate to <a class="reference external" href="https://bigip1.f5lab.local">https://bigip1.f5lab.local</a></p>
</li>
<li><p class="first">Login to the BIG-IP GUI with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Navigate to Access&gt;&gt;Profiles/Policies&gt;&gt;Access Profiles (Per-Session Policies).  Do not click the <strong>+</strong> (plus symbol).</p>
<blockquote>
<div><p><img alt="image034" src="../../_images/03413.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The Policy has been successfully deleted.</p>
<blockquote>
<div><p><img alt="image040" src="../../_images/0409.png" /></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-6-lab-cleanup">
<h2>Task 6 - Lab Cleanup<a class="headerlink" href="#task-6-lab-cleanup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From Postman, Click the <strong>3 dots</strong> on the bottom right of the student-class4-module2-lab1 Collection.</p>
</li>
<li><p class="first">Click <strong>Delete</strong></p>
<blockquote>
<div><p><img alt="image042" src="../../_images/0428.png" /></p>
</div></blockquote>
</li>
</ol>
<p>This concludes the lab on building a baseline Access Policy</p>
<blockquote>
<div><img alt="image000" src="../../_images/00030.png" /></div></blockquote>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="intro.html" title="Environment Overview" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab02.html" title="Lab 2: Create a SAML SP Per-Session Policy" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>