<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 3: Add a Webtop link to an existing Webtop</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 3: Add a Webtop link to an existing Webtop"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2021-06-21 13:45:41"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 3: Add a Webtop link to an existing Webtop &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="500 Series: Troubleshooting" href="../../class5/class5.html" />
    <link rel="prev" title="Lab 2: Create a SAML SP Per-Session Policy" href="lab02.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">100 Series: Access Foundational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">200 Series: Assisted Deployment Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">300 Series: Advanced Use Cases &amp; Solutions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class4.html">400 Series: Access Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">500 Series: Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archived/archived.html">Archived Identity &amp; Access Management Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 3: Add a Webtop link to an existing Webtop</a><ul>
<li><a class="reference internal" href="#access-lab-environment">Access Lab Environment</a></li>
<li><a class="reference internal" href="#task-1-import-postman-collections">Task 1 - Import Postman Collections</a></li>
<li><a class="reference internal" href="#task-2-create-a-webtop-policy">Task 2 - Create A Webtop Policy</a></li>
<li><a class="reference internal" href="#task-3-create-a-webtop-link">Task 3 - Create a Webtop Link</a></li>
<li><a class="reference internal" href="#task-4-add-a-webtop-to-an-advanced-resource-assign">Task 4 - Add a webtop to an Advanced Resource Assign</a></li>
<li><a class="reference internal" href="#task-4-lab-cleanup">Task 4 - Lab Cleanup</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../class4.html">400 Series: Access Automation</a>

          <span class="right">
             <a href="../../_sources/class4/module2/lab03.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-3-add-a-webtop-link-to-an-existing-webtop">
<h1>Lab 3: Add a Webtop link to an existing Webtop<a class="headerlink" href="#lab-3-add-a-webtop-link-to-an-existing-webtop" title="Permalink to this headline">¶</a></h1>
<p>In this lab your will learn about the API calls necessary to modify an existing webtop by adding a new link to the Access Policy .  The graphic below depicts the basic flow required for modifying the existing policy via API.</p>
<blockquote>
<div><img alt="image100" src="../../_images/1003.png" /></div></blockquote>
<div class="section" id="access-lab-environment">
<h2>Access Lab Environment<a class="headerlink" href="#access-lab-environment" title="Permalink to this headline">¶</a></h2>
<p>To access your dedicated student lab environment, you will need a web browser and Remote Desktop Protocol (RDP) client software. The web browser will be used to access the Unified Demo Framework (UDF) Training Portal. The RDP client will be used to connect to the jumphost, where you will be able to access the BIG-IP management interfaces (HTTPS, SSH).</p>
<ol class="arabic">
<li><p class="first">Click <strong>DEPLOYMENT</strong> located on the top left corner to display the environment</p>
</li>
<li><p class="first">Click <strong>ACCESS</strong> next to jumphost.f5lab.local</p>
<blockquote>
<div><p><img alt="image101" src="../../_images/1015.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Select your RDP resolution.</p>
</li>
<li><p class="first">The RDP client on your local host establishes a RDP connection to the Jumphost.</p>
</li>
<li><p class="first">Login with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>User: <strong>f5lab\user1</strong></li>
<li>Password: <strong>user1</strong></li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-1-import-postman-collections">
<h2>Task 1 - Import Postman Collections<a class="headerlink" href="#task-1-import-postman-collections" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From the Jumpbox, open <strong>Postman</strong> via the desktop shortcut or toolbar at the bottom</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dismiss any prompts to update Postman.</p>
</div>
<p><img alt="image001" src="../../_images/00120.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Yes</strong> if prompted for “Do you want to allow this app to make changes to your device?”</p>
<blockquote>
<div><p><img alt="image002" src="../../_images/00221.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Import</strong> located on the top left of the Postman application</p>
<blockquote>
<div><p><img alt="image003" src="../../_images/00320.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Upload Files</strong></p>
<p><img alt="image004" src="../../_images/00421.png" /></p>
</li>
<li><p class="first">Navigate to C:\access-labs\class4\module2\student_files, select <strong>student-class4-module2-lab3.postman_collection.json</strong>, and click <strong>Open</strong></p>
<blockquote>
<div><p><img alt="image005" src="../../_images/00521.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Import</strong></p>
<p><img alt="image006" src="../../_images/00620.png" /></p>
</li>
<li><p class="first">A collection called <strong>student-class4-module2-lab3</strong> will appear on the left side in Postman</p>
</li>
</ol>
</div>
<div class="section" id="task-2-create-a-webtop-policy">
<h2>Task 2 - Create A Webtop Policy<a class="headerlink" href="#task-2-create-a-webtop-policy" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Hover over the collection name <strong>student-class4-module2-lab3</strong> with your mouse and click the <strong>Arrow</strong> icon.</p>
<p><img alt="image007" src="../../_images/00721.png" /></p>
</li>
<li><p class="first">Click the <strong>Create Policy</strong> folder.</p>
<blockquote>
<div><p><img alt="image008" src="../../_images/00820.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>Run</strong> button and Postman Runner will open.</p>
<p><img alt="image009" src="../../_images/00920.png" /></p>
</li>
<li><p class="first">Click the blue button <strong>Run student-class…</strong> and the API requests will start being sent to the BIG-IP.</p>
<blockquote>
<div><p><img alt="image010" src="../../_images/01020.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The <strong>Pass</strong> circle will display a value 10.</p>
</li>
<li><p class="first">Close Runner by clicking the <strong>X</strong> in the top right corner.</p>
<blockquote>
<div><p><img alt="image011" src="../../_images/01121.png" /></p>
</div></blockquote>
</li>
<li><p class="first">From the jumphost, ppen a browser and navigate to <a class="reference external" href="https://bigip1.f5lab.local">https://bigip1.f5lab.local</a></p>
</li>
<li><p class="first">Login to the BIG-IP GUI with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Navigate to Access&gt;&gt;Profiles/Policies&gt;&gt;Access Profiles (Per-Session Policies).  Do not click the <strong>+</strong> (plus symbol).</p>
<blockquote>
<div><p><img alt="image012" src="../../_images/01221.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The policy <strong>class4-module2-lab3-psp</strong> you created via automation is displayed.  Click <strong>Edit</strong> to view the policy in Visual Policy Editor(VPE).</p>
<blockquote>
<div><p><img alt="image013" src="../../_images/01322.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The policy was successfully deployed using SAML Authenticaiton and an Advanced Resource Assign. Click on the <strong>Advanced Resource Assign</strong> action.</p>
<blockquote>
<div><p><img alt="image014" src="../../_images/01420.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The Advanced Resource Assign contains a webtop and a single webtop link.</p>
<blockquote>
<div><p><img alt="image015" src="../../_images/01521.png" /></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-3-create-a-webtop-link">
<h2>Task 3 - Create a Webtop Link<a class="headerlink" href="#task-3-create-a-webtop-link" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">From Postman, expand the <strong>student-class4-module2-lab3</strong> collection and then the <strong>Create Webtop Link</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image016" src="../../_images/01619.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the request <strong>bigip-create-customization group-resource</strong> and then <strong>Body</strong>.  The body of this request specifies that we will be creating a webtop link resource.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One thing to note, all webtop link resources use “/Common/standard” as the source type even if the policy is using “/Common/Modern”.</p>
</div>
<p><img alt="image017" src="../../_images/01719.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>send</strong> button in the upper right corner.  You will receive a 200 OK status code with a response body.  This is an indication that the customization group was created.</p>
<blockquote>
<div><p><img alt="image018" src="../../_images/01819.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the request <strong>bigip-create-webtop-link</strong> and then <strong>Body</strong>.  The body of this request creates the webtop link Resource.  The applicationUri JSON key contains the resource destination.  The Postman Variable ((DNS3_NAME)) is set to server2.acme.com</p>
<blockquote>
<div><p><img alt="image019" src="../../_images/01920.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>send</strong> button in the upper right corner.  You will receive a 200 OK status code with a response body.  This is an indication that the webtop link resource was created.</p>
<blockquote>
<div><p><img alt="image020" src="../../_images/02019.png" /></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="task-4-add-a-webtop-to-an-advanced-resource-assign">
<h2>Task 4 - Add a webtop to an Advanced Resource Assign<a class="headerlink" href="#task-4-add-a-webtop-to-an-advanced-resource-assign" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating or modifying a policy it must be performed within a transaction.  A transaction occurs in multiple steps.  First, you create the transaction by receiving a transaction ID from the BIG-IP.  Next, you pass subsequent configuration requests that contain the transaction ID header to the BIG-IP.  The BIG-IP does not process these requests.  Instead it holds those requests until the transaction is commited in the final step.  It’s important to understand that transactions have an all or nothing approach.  Either every request in the transaction is processed sucessfully or none of the configuration changes are made.  This is extremely important to ensure all the required information is there for building a working policy. To understand more about transactions please review <a class="reference internal" href="lab01.html#class4-module2-lab1-endpoints"><span class="std std-ref">The Explore the icontrolRest Endpoints of lab 1</span></a></p>
</div>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Expand the <strong>Modify Policy</strong> folder.  Since the only change to the policy is the addition of a single webtop link you will only review that single request. Expand the <strong>Modify Advanced Resource Assign</strong> subfolder.</p>
<blockquote>
<div><p><img alt="image021" src="../../_images/02118.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>bigip-create-agent-adv resource assign</strong> and then <strong>Body</strong>.</p>
</li>
<li><p class="first">The request method is a PATCH since the advanced resource assign agent exists.  We do not want to create the agent, but modify an existing agent.</p>
</li>
<li><p class="first">The request body is the same as the request used to create the advanced resource assign agent.  The only difference is the addition of the new webtop resource.</p>
<blockquote>
<div><p><img alt="image022" src="../../_images/02218.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Hover over the Collection name <strong>student-class4-module2-lab3</strong> with your mouse and click the <strong>Arrow</strong> icon.</p>
<p><img alt="image023" src="../../_images/02319.png" /></p>
</li>
</ol>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Click <strong>student-class4-module2-lab3</strong> to return to the main folder if you are not already there.</p>
<p><img alt="image033" src="../../_images/03315.png" /></p>
</li>
</ol>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Click the <strong>Modify Policy</strong> folder. You will see four subfolders in the folder.</p>
<blockquote>
<div><p><img alt="image024" src="../../_images/02419.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>Run</strong> button and Postman Runner will open.</p>
<p><img alt="image025" src="../../_images/02519.png" /></p>
</li>
<li><p class="first">Click the blue button <strong>Run student-class…</strong> and the API requests will start being sent to the BIG-IP.</p>
<blockquote>
<div><p><img alt="image026" src="../../_images/02618.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The <strong>Pass</strong> circle will display a value 2.</p>
</li>
<li><p class="first">Close Runner by clicking the <strong>X</strong> in the top right corner.</p>
<blockquote>
<div><p><img alt="image027" src="../../_images/02718.png" /></p>
</div></blockquote>
</li>
<li><p class="first">From the jumphost, open a browser and navigate to <a class="reference external" href="https://bigip1.f5lab.local">https://bigip1.f5lab.local</a></p>
</li>
<li><p class="first">Login to the BIG-IP GUI with the following credentials:</p>
<blockquote>
<div><ul class="simple">
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Navigate to Access&gt;&gt;Profiles/Policies&gt;&gt;Access Profiles (Per-Session Policies).  Do not click the <strong>+</strong> (plus symbol).</p>
<blockquote>
<div><p><img alt="image012" src="../../_images/01221.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click <strong>Edit</strong>  to the right of <strong>class4-module2-lab3-psp</strong> to view the policy in Visual Policy Editor(VPE).</p>
<blockquote>
<div><p><img alt="image013" src="../../_images/01322.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click on the <strong>Advanced Resource Assign</strong> action to display the changes.</p>
<blockquote>
<div><p><img alt="image014" src="../../_images/01420.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The Advanced Resource Assign now has two Webtop Links.  If we wanted to remove the link we would simply send a new request using the PATCH method that didn’t contain the resource inside a transaction.</p>
<p><img alt="image028" src="../../_images/02818.png" /></p>
</li>
</ol>
</div>
<div class="section" id="task-4-lab-cleanup">
<h2>Task 4 - Lab Cleanup<a class="headerlink" href="#task-4-lab-cleanup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Hover over the Collection name <strong>student-class4-module2-lab3</strong> with your mouse and click the <strong>Arrow</strong> icon.</p>
<p><img alt="image023" src="../../_images/02319.png" /></p>
</li>
</ol>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Click <strong>student-class4-module2-lab3</strong> to return to the main folder if you are not already there.</p>
<p><img alt="image034" src="../../_images/03415.png" /></p>
</li>
</ol>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Click the <strong>Lab Cleanup</strong> folder.</p>
<blockquote>
<div><p><img alt="image029" src="../../_images/02918.png" /></p>
</div></blockquote>
</li>
<li><p class="first">Click the blue <strong>Run</strong> button and Postman Runner will open.</p>
<p><img alt="image030" src="../../_images/03016.png" /></p>
</li>
<li><p class="first">Click the blue button <strong>Run student-class…</strong> and the API requests will start being sent to the BIG-IP.</p>
<blockquote>
<div><p><img alt="image031" src="../../_images/03116.png" /></p>
</div></blockquote>
</li>
<li><p class="first">The <strong>Pass</strong> circle will display a value 7.</p>
<blockquote>
<div><p><img alt="image032" src="../../_images/03214.png" /></p>
</div></blockquote>
</li>
<li><p class="first">From Postman, Click the <strong>3 dots</strong> on the bottom right of the student-class4-module2-lab3 Collection.</p>
</li>
<li><p class="first">Click <strong>Delete</strong></p>
<blockquote>
<div><p><img alt="image035" src="../../_images/03513.png" /></p>
</div></blockquote>
</li>
</ol>
<p>This concludes our lab on modifying a webtop via automation.</p>
<blockquote>
<div><img alt="image000" src="../../_images/00032.png" /></div></blockquote>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab02.html" title="Lab 2: Create a SAML SP Per-Session Policy" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../../class5/class5.html" title="500 Series: Troubleshooting" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>